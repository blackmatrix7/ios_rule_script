const getLotteryCookieRegex=/^https?:\/\/m\.client\.10010\.com\/dailylottery\/static\/(integral|doubleball)\/firstpage/,unicomCookieKey="unicom_user_cookie",mobileKey="unicom_mobile",encryptMobileKey="unicom_encrypt_mobile",cityCodeKey="city_code",scriptName="ä¸­å›½è”é€š";let magicJS=MagicJS("ä¸­å›½è”é€š","DEBUG");function UserLogin(cookie,encryptMobile){return new Promise(resolve=>{if(cookie){let options={url:"http://m.client.10010.com/dailylottery/static/textdl/userLogin?flag=1",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Encoding":"gzip, deflate","Accept-Language":"zh-cn",Connection:"close",Cookie:cookie,Host:"m.client.10010.com","Upgrade-Insecure-Requests":"1","User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 13_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 unicom{version:iphone_c@6.0201}{systemVersion:dis}"}};magicJS.get(options,(err,resp,data)=>{err?(magicJS.logInfo("ç”¨æˆ·ç™»å½•å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),resolve([!1,"ç”¨æˆ·ç™»å½•å¤±è´¥"])):data.indexOf(encryptMobile)>=0?(magicJS.logInfo("ç”¨æˆ·ç™»å½•æˆåŠŸ"),resolve([!0,"ç”¨æˆ·ç™»å½•æˆåŠŸ"])):data.indexOf("è¯·ç¨åé‡è¯•")>=0?(magicJS.logInfo("ç”¨æˆ·ç™»å½•å¤±è´¥"),resolve([!1,"ç”¨æˆ·ç™»å½•å¤±è´¥"])):(magicJS.logInfo("ç”¨æˆ·ç™»å½•å¤±è´¥ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š"+data),resolve([!1,"ç”¨æˆ·ç™»å½•å¤±è´¥"]))})}else resolve([!1,"è¯·å…ˆè·å–tokenå†ç™»å½•"]),magicJS.logInfo("è¯·å…ˆè·å–cookieå†åˆ·æ–°token")})}function AppSignin(cookie){return new Promise((resolve,reject)=>{let options={url:"https://act.10010.com/SigninApp/signin/daySign?vesion=0.5630763707346611",headers:{Accept:"application/json, text/plain, */*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-cn",Connection:"keep-alive",Cookie:cookie,Host:"act.10010.com",Origin:"https://img.client.10010.com",Referer:"https://img.client.10010.com/SigininApp/index.html","User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 13_3_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 unicom{version:iphone_c@7.0402}{systemVersion:dis}{yw_code:}",savedata:"false"},body:""};magicJS.post(options,(err,resp,data)=>{if(err)magicJS.logError("ç­¾åˆ°å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),magicJS.notify("ä¸­å›½è”é€š","","âŒç­¾åˆ°å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼ï¼"),reject("ç­¾åˆ°å¤±è´¥");else{let obj={};try{obj=JSON.parse(data),"0000"===obj.status?(magicJS.logInfo("ç­¾åˆ°æˆåŠŸ"),resolve([!0,"ç­¾åˆ°æˆåŠŸ",obj.data.prizeCount,obj.data.growValue,obj.data.flowerCount])):"0001"==obj.status?(magicJS.logWarning("å°šæœªç™»å½•"),resolve([!1,"å°šæœªç™»å½•",null,null,null])):"0002"==obj.status?(magicJS.logWarning("é‡å¤ç­¾åˆ°"),resolve([!0,"é‡å¤ç­¾åˆ°",null,null,null])):(magicJS.logWarning("ç­¾åˆ°å¼‚å¸¸ï¼Œæ¥å£è¿”å›æ•°æ®ä¸åˆæ³•ã€‚"+data),reject("ç­¾åˆ°å¼‚å¸¸"))}catch(err){magicJS.logError("ç­¾åˆ°å¼‚å¸¸ï¼Œä»£ç æ‰§è¡Œé”™è¯¯ï¼š"+err),reject("æ‰§è¡Œé”™è¯¯")}}})})}function DoubleAdPlaying(cookie,mobile){let options={url:"https://act.10010.com/SigninApp/signin/bannerAdPlayingLogo",headers:{Accept:"application/json, text/plain, */*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-cn",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded",Cookie:cookie,Host:"act.10010.com",Origin:"https://img.client.10010.com",Referer:`https://img.client.10010.com/SigininApp/index.html?version=iphone_c@8.0200&desmobile=${mobile}`,"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 14_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 unicom{version:iphone_c@8.0200}{systemVersion:dis}{yw_code:}"},body:{orderId:"24F051D47389A008A1161E17F92438EC",imei:"455baba549deb814f6c75395fbe2403f855aa6dbedb50bc2acbff0ef4aab96f9"}};return new Promise((resolve,reject)=>{magicJS.post(options,(err,resp,data)=>{if(err)magicJS.logError("ç­¾åˆ°å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),reject("ç§¯åˆ†ç¿»å€å¤±è´¥");else{let obj={};try{magicJS.logDebug(`ç§¯åˆ†ç¿»å€ï¼Œæ¥å£å“åº”ï¼š${data}`),obj=JSON.parse(data),"0000"===obj.status&&obj.data.returnStr.indexOf("å¤±è´¥")>=0?(magicJS.logWarning(`ç§¯åˆ†ç¿»å€å¤±è´¥ï¼š${obj.data.returnStr}`),reject("ç§¯åˆ†ç¿»å€å¤±è´¥")):"0000"===obj.status?(magicJS.logInfo("ç§¯åˆ†ç¿»å€æˆåŠŸ"),resolve(obj.data.prizeCount)):"0010"===obj.status?(magicJS.logWarning("ç§¯åˆ†é‡å¤ç¿»å€"),resolve(0)):(magicJS.logWarning(`ç§¯åˆ†ç¿»å€å¤±è´¥ï¼Œæ¥å£è¿”å›æ•°æ®ä¸åˆæ³•ï¼š\n${data}`),reject("ç§¯åˆ†ç¿»å€å¤±è´¥"))}catch(err){magicJS.logError("ç§¯åˆ†ç¿»å€å¤±è´¥"+err),reject("ç§¯åˆ†ç¿»å€å¤±è´¥")}}})})}function GetContinueCount(cookie){return new Promise((resolve,reject)=>{let options={url:"https://act.10010.com/SigninApp/signin/getContinuCount?vesion=0.35425159102265746",headers:{Accept:"application/json, text/javascript, */*; q=0.01","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-cn",Connection:"keep-alive",Cookie:cookie,Host:"act.10010.com",Origin:"https://act.10010.com",Referer:"https://act.10010.com/SigninApp/signin/querySigninActivity.htm?version=iphone_c@6.0201","User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 13_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148","X-Requested-With":"XMLHttpRequest",savedata:"false"},body:""};magicJS.post(options,(err,resp,data)=>{if(err)magicJS.logError("è·å–è¿ç»­ç­¾åˆ°æ¬¡æ•°å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),reject("?");else if(data){let number="?";/^\d+$/.test(data)?number=data:magicJS.logWarning("è·å–è¿ç»­ç­¾åˆ°æ¬¡æ•°å¤±è´¥ï¼Œæ¥å£å“åº”ä¸åˆæ³•ã€‚"+data),resolve(number)}else magicJS.logWarning("è·å–è¿ç»­ç­¾åˆ°æ¬¡æ•°å¼‚å¸¸ï¼Œæ²¡æœ‰è·å–åˆ°å“åº”ä½“ã€‚"),reject("?")})})}function GetUserInfo(cookie,mobile){let options={url:`https://m.client.10010.com/mobileService/home/queryUserInfoSeven.htm?version=iphone_c@7.0402&desmobiel=${mobile}&showType=3`,headers:{Accept:"*/*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-cn",Connection:"close",Cookie:cookie,Host:"m.client.10010.com","User-Agent":"ChinaUnicom4.x/240 CFNetwork/1121.2.2 Darwin/19.3.0"}};return new Promise((resolve,reject)=>{magicJS.get(options,(err,resp,data)=>{if(err)magicJS.logError("è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),reject({});else{let result={};try{let obj=JSON.parse(data);obj.hasOwnProperty("data")&&obj.data.hasOwnProperty("dataList")?(obj.data.dataList.forEach(element=>{"flow,fee,voice,point".indexOf(element.type)>=0&&("-"!=element.number?result[element.type]=`${element.remainTitle}${element.number}${element.unit}`:(magicJS.logWarning("è·å–ç”¨æˆ·ä¿¡æ¯å¼‚å¸¸ï¼š"+data),reject("è·å–ç”¨æˆ·ä¿¡æ¯å¼‚å¸¸")))}),magicJS.logInfo("è·å–ç”¨æˆ·ä¿¡æ¯ï¼š"+JSON.stringify(result)),resolve(result)):(magicJS.logWarning("è·å–ç”¨æˆ·ä¿¡æ¯å¼‚å¸¸ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š"+data),reject("è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£å“åº”å¼‚å¸¸"))}catch(err){magicJS.logError(`è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼Œä»£ç æ‰§è¡Œå¼‚å¸¸ï¼š${err}ï¼Œæ¥å£è¿”å›ï¼š${data}`),reject("è·å–ç”¨æˆ·ä¿¡æ¯æ‰§è¡Œå¼‚å¸¸")}}})})}function GetMeituanCoupon(cookie){let options={url:"https://m.client.10010.com/welfare-mall-front/mobile/api/bj2402/v1?reqdata=%7B%22saleTypes%22%3A%22TY%22%2C%22amount%22%3A0%2C%22goodsId%22%3A%228a29ac8a72be05a70172c067722600b8%22%2C%22payWay%22%3A%22%22%2C%22imei%22%3A%22%22%2C%22proFlag%22%3A%22%22%2C%22points%22%3A0%2C%22scene%22%3A%22%22%2C%22promoterCode%22%3A%22%22%7D",headers:{Accept:"application/json, text/plain, */*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-cn",Connection:"keep-alive",Cookie:cookie,Host:"m.client.10010.com",Origin:"https://img.client.10010.com",Referer:"https://img.client.10010.com/superFriday/","User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 14_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 unicom{version:iphone_c@8.0004}{systemVersion:dis}{yw_code:}"}};return new Promise((resolve,reject)=>{magicJS.get(options,(err,resp,data)=>{if(err)magicJS.logError("é¢†å–ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸å¼‚å¸¸ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),reject("ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸:è¯·æ±‚å¼‚å¸¸");else{let obj={};try{magicJS.logDebug(`é¢†å–ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼Œæ¥å£è¿”å›ï¼š\n${data}`),obj=JSON.parse(data),obj.hasOwnProperty("code")?"0"==obj.code&&"ä¸‹å•æˆåŠŸ"==obj.msg?(magicJS.logInfo("é¢†å–ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼Œé¢†å–æˆåŠŸ"),resolve("ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼šé¢†å–æˆåŠŸ")):"1"==obj.code?(magicJS.logWarning("é¢†å–ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼Œè¾¾åˆ°é¢†å–ä¸Šé™"),resolve("ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼šè¾¾åˆ°é¢†å–ä¸Šé™")):"200"==obj.code&&obj.msg.indexOf("å¤ªç«çˆ†")>=0?(magicJS.logWarning("é¢†å–ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼Œæ´»åŠ¨å¤ªç«çˆ†"),resolve("ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼šæ´»åŠ¨å¤ªç«çˆ†é¢†å–å¤±è´¥")):(magicJS.logWarning("é¢†å–ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š"+data),reject("æ¥å£å“åº”ä¸åˆæ³•")):(magicJS.logWarning("é¢†å–ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š"+data),reject("ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼šæ¥å£å“åº”ä¸åˆæ³•"))}catch(err){magicJS.logError("é¢†å–ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼Œä»£ç æ‰§è¡Œå¼‚å¸¸ï¼š"+err),reject("ç¾å›¢å¤–å–ä¼˜æƒ åˆ¸ï¼šä»£ç æ‰§è¡Œå¼‚å¸¸")}}})})}function GetSigninTasks(cookie,mobile){let options={url:"https://act.10010.com/SigninApp/doTask/getTaskInfo",headers:{Accept:"application/json, text/plain, */*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-cn",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded",Cookie:cookie,Host:"act.10010.com",Origin:"https://img.client.10010.com",Referer:`https://img.client.10010.com/SigininApp/index.html?version=iphone_c@8.0200&desmobile=${mobile}`,"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 14_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 unicom{version:iphone_c@8.0200}{systemVersion:dis}{yw_code:}"},body:""};return new Promise((resolve,reject)=>{magicJS.post(options,(err,resp,data)=>{if(err)magicJS.logError("è·å–ç­¾åˆ°ä»»åŠ¡åˆ—è¡¨å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),reject();else{magicJS.logDebug("è·å–ç­¾åˆ°ä»»åŠ¡åˆ—è¡¨ï¼Œæ¥å£å“åº”æ•°æ®ï¼š"+data);let obj=JSON.parse(data);"0000"===obj.status?(magicJS.logInfo("è·å–ç­¾åˆ°ä»»åŠ¡æˆåŠŸ"),resolve()):"9999"===obj.status?(magicJS.logError(obj.msg),reject(obj.msg)):(magicJS.logWarning(`è·å–ç­¾åˆ°ä»»åŠ¡å¤±è´¥ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š\n${data}`),reject("æ¥å£å“åº”ä¸åˆæ³•"))}})}).catch(err=>{magicJS.logError(err)})}function FinishVideo(cookie,mobile){let options={url:"https://act.10010.com/SigninApp/doTask/finishVideo",headers:{Accept:"application/json, text/plain, */*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-cn",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded",Cookie:cookie,Host:"act.10010.com",Origin:"https://img.client.10010.com",Referer:`https://img.client.10010.com/SigininApp/index.html?version=iphone_c@8.0200&desmobile=${mobile}`,"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 14_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 unicom{version:iphone_c@8.0200}{systemVersion:dis}{yw_code:}"},body:{orderId:"3E28C3BFBEB825F5FCD2F01DF9DB5141",imei:"5d58683de1d5d3b383a2e228cff935028a2399195f343cfe122eab1ddf90ee17"}};return new Promise((resolve,reject)=>{magicJS.post(options,(err,resp,data)=>{if(err)magicJS.logError("å®Œæˆè§‚çœ‹è§†é¢‘ä»»åŠ¡å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),reject();else{magicJS.logDebug("è§‚çœ‹è§†é¢‘ä»»åŠ¡ï¼Œæ¥å£å“åº”æ•°æ®ï¼š"+data);let obj=JSON.parse(data);"0000"===obj.status&&resolve(),"9999"===obj.status?(magicJS.logWarning(`è§‚çœ‹è§†é¢‘ä»»åŠ¡å¤±è´¥ï¼Œå¼‚å¸¸ä¿¡æ¯ï¼š\n${obj.msg}`),reject(obj.msg)):(magicJS.logWarning(`è§‚çœ‹è§†é¢‘ä»»åŠ¡å¤±è´¥ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š\n${data}`),reject("æ¥å£å“åº”ä¸åˆæ³•"))}})})}function GetSigninTaskPirze(cookie,mobile){let options={url:"https://act.10010.com/SigninApp/doTask/getPrize",headers:{Accept:"application/json, text/plain, */*","Accept-Encoding":"gzip, deflate, br","Accept-Language":"zh-cn",Connection:"keep-alive","Content-Type":"application/x-www-form-urlencoded",Cookie:cookie,Host:"act.10010.com",Origin:"https://img.client.10010.com",Referer:`https://img.client.10010.com/SigininApp/index.html?version=iphone_c@8.0200&desmobile=${mobile}`,"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 14_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 unicom{version:iphone_c@8.0200}{systemVersion:dis}{yw_code:}"},body:""};return new Promise((resolve,reject)=>{magicJS.post(options,(err,resp,data)=>{if(err)magicJS.logError("é¢†å–ç­¾åˆ°ä»»åŠ¡å¥–åŠ±å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),reject();else{magicJS.logDebug("é¢†å–ç­¾åˆ°ä»»åŠ¡å¥–åŠ±ï¼Œæ¥å£å“åº”æ•°æ®ï¼š\n"+data);let obj=JSON.parse(data);"0000"===obj.status&&obj.data.returnStr.indexOf("ç½‘ç»œæ‹¥å µ")<0?resolve(obj.data.returnStr):"0000"===obj.status&&obj.data.returnStr.indexOf("ç½‘ç»œæ‹¥å µ")>=0?(magicJS.logDebug(`é¢†å–ç­¾åˆ°ä»»åŠ¡å¥–åŠ±å¤±è´¥ï¼Œç½‘ç»œæ‹¥å µï¼š\n${data}`),reject("ç½‘ç»œæ‹¥å µ")):(magicJS.logWarning(`é¢†å–ç­¾åˆ°ä»»åŠ¡å¥–åŠ±å¤±è´¥ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š\n${data}`),reject("æ¥å£å“åº”ä¸åˆæ³•"))}})})}function GetLotteryCount(cookie,encryptMobile){let options={url:"http://m.client.10010.com/dailylottery/static/active/findActivityInfojifen?areaCode=031&groupByType=&mobile=",headers:{Accept:"*/*","Accept-Encoding":"gzip, deflate","Accept-Language":"zh-cn",Connection:"close",Cookie:cookie,Host:"m.client.10010.com",Origin:"https://m.client.10010.com",Referer:`http://m.client.10010.com/dailylottery/static/integral/firstpage?encryptmobile=${encryptMobile}`,"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 13_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148","X-Requested-With":"XMLHttpRequest",savedata:"false"},body:""};return new Promise(resolve=>{magicJS.get(options,(err,resp,data)=>{if(err)magicJS.logError("è·å–æŠ½å¥–æ¬¡æ•°å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),resolve(0);else try{let obj=JSON.parse(data);if(obj.hasOwnProperty("acFrequency")){let lotteryCount=Number(obj.acFrequency.totalAcFreq);magicJS.logInfo("è·å–æŠ½å¥–æ¬¡æ•°ï¼š"+lotteryCount),resolve(lotteryCount)}else magicJS.logWarning("è·å–æŠ½å¥–æ¬¡æ•°å¼‚å¸¸ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š"+data),resolve(0)}catch(err){magicJS.logError(`è·å–æŠ½å¥–æ¬¡æ•°å¼‚å¸¸ï¼Œä»£ç æ‰§è¡Œå¼‚å¸¸ï¼š${err}ï¼Œæ¥å£å“åº”ï¼š${data}`),resolve(0)}})})}function GetLotteryCountNewVersion(cookie,encryptMobile,cityCode){let options={url:`http://m.client.10010.com/dailylottery/static/active/findActivityInfo?areaCode=${cityCode}&groupByType=&mobile=${encryptMobile}`,headers:{Accept:"*/*","Accept-Encoding":"gzip, deflate","Accept-Language":"zh-cn",Connection:"close",Cookie:cookie,Host:"m.client.10010.com",Origin:"https://m.client.10010.com",Referer:"http://m.client.10010.com/dailylottery/static/integral/firstpage?encryptmobile=","User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 13_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148","X-Requested-With":"XMLHttpRequest",savedata:"false"},body:""};return new Promise(resolve=>{magicJS.get(options,(err,resp,data)=>{if(err)magicJS.logError("è·å–æ–°ç‰ˆæŠ½å¥–æ¬¡æ•°å¤±è´¥ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),resolve(0);else{let obj=JSON.parse(data);if(obj.hasOwnProperty("acFrequency")){let lotteryCount=Number(obj.acFrequency.totalAcFreq);magicJS.logInfo("è·å–æ–°ç‰ˆæŠ½å¥–æ¬¡æ•°ï¼š"+lotteryCount),resolve(lotteryCount)}else magicJS.logWarning("è·å–æ–°ç‰ˆæŠ½å¥–æ¬¡æ•°å¼‚å¸¸ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š"+data),resolve(0)}})})}function DailyLottery(cookie,encryptMobile){let options={url:`http://m.client.10010.com/dailylottery/static/integral/choujiang?usernumberofjsp=${encryptMobile}`,headers:{Accept:"application/json, text/javascript, */*; q=0.01","Accept-Encoding":"gzip, deflate","Accept-Language":"zh-cn",Connection:"close","Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Cookie:cookie,Host:"m.client.10010.com",Origin:"https://m.client.10010.com",Referer:`http://m.client.10010.com/dailylottery/static/integral/firstpage?encryptmobile=${encryptMobile}`,"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 13_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148","X-Requested-With":"XMLHttpRequest",savedata:"false"},body:""};return new Promise(resolve=>{magicJS.post(options,(err,resp,data)=>{if(err)magicJS.logError("æ¯æ—¥å…è´¹æŠ½å¥–ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),resolve("è¯·æ±‚å¼‚å¸¸");else{magicJS.logDebug("æ¯æ—¥å…è´¹æŠ½å¥–ï¼Œæ¥å£å“åº”æ•°æ®ï¼š"+data);let obj=JSON.parse(data);obj.hasOwnProperty("Rsptype")&&"6666"==obj.Rsptype?resolve("æ¬¡æ•°ä¸è¶³"):obj.hasOwnProperty("Rsptype")&&"3333"==obj.Rsptype?resolve("è¯·æ±‚æ— æ•ˆ"):obj.hasOwnProperty("RspMsg")?resolve(obj.RspMsg):(magicJS.logWarning("æ¯æ—¥å…è´¹æŠ½å¥–ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š"+data),resolve("æ¥å£å“åº”ä¸åˆæ³•"))}})})}function DailyLotteryNewVersion(cookie,encryptMobile){let options={url:`https://m.client.10010.com/dailylottery/static/doubleball/choujiang?usernumberofjsp=${encryptMobile}`,headers:{Accept:"application/json, text/javascript, */*; q=0.01","Accept-Encoding":"gzip, deflate","Accept-Language":"zh-cn",Connection:"close","Content-Type":"application/x-www-form-urlencoded; charset=utf-8",Cookie:cookie,Host:"m.client.10010.com",Origin:"https://m.client.10010.com",Referer:`http://m.client.10010.com/dailylottery/static/integral/firstpage?encryptmobile=${encryptMobile}`,"User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 13_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148","X-Requested-With":"XMLHttpRequest",savedata:"false"},body:""};return new Promise(resolve=>{magicJS.post(options,(err,resp,data)=>{if(err)magicJS.logError("æ–°ç‰ˆæ¯æ—¥å…è´¹æŠ½å¥–ï¼Œhttpè¯·æ±‚å¼‚å¸¸ï¼š"+err),resolve("è¯·æ±‚å¼‚å¸¸");else{magicJS.logDebug("æ–°ç‰ˆæ¯æ—¥å…è´¹æŠ½å¥–ï¼Œæ¥å£å“åº”æ•°æ®ï¼š"+data);let obj=JSON.parse(data);obj.hasOwnProperty("Rsptype")&&"6666"==obj.Rsptype?resolve("æ¬¡æ•°ä¸è¶³"):obj.hasOwnProperty("Rsptype")&&"3333"==obj.Rsptype?resolve("è¯·æ±‚æ— æ•ˆ"):obj.hasOwnProperty("RspMsg")?resolve(obj.RspMsg):(magicJS.logWarning("æ–°ç‰ˆæ¯æ—¥å…è´¹æŠ½å¥–ï¼Œæ¥å£å“åº”ä¸åˆæ³•ï¼š"+data),resolve("æ¥å£å“åº”ä¸åˆæ³•"))}})})}async function StartDailyLottery(cookie,encryptMobile){let lotteryCount=await GetLotteryCount(cookie,encryptMobile),lotteryList="";if(lotteryCount>0)for(let i=0;i<lotteryCount;i++)magicJS.logInfo(`ç¬¬${i+1}æ¬¡å…è´¹æŠ½å¥–å¼€å§‹`),lotteryList&&(lotteryList+="\n"),lotteryList+=`ç¬¬${i+1}æ¬¡æŠ½å¥–ï¼š${await DailyLottery(cookie,encryptMobile)}`;return[lotteryCount,lotteryList]}async function StartDailyLotteryNewVersion(cookie,encryptMobile,cityCode,lotteryCount){let lotteryNewVersionCount=await GetLotteryCountNewVersion(cookie,encryptMobile,cityCode),lotteryNewVersionList="";if(lotteryNewVersionCount>0)for(let i=0;i<lotteryNewVersionCount;i++)magicJS.logInfo(`æ–°ç‰ˆç¬¬${i+1}æ¬¡å…è´¹æŠ½å¥–å¼€å§‹`),lotteryNewVersionList&&(lotteryNewVersionList+="\n"),lotteryNewVersionList+=`ç¬¬${lotteryCount+i+1}æ¬¡æŠ½å¥–ï¼š${await DailyLotteryNewVersion(cookie,encryptMobile)}`;return[lotteryNewVersionCount,lotteryNewVersionList]}function MagicJS(scriptName="MagicJS",logLevel="INFO"){return new class{constructor(){if(this.version="2.2.3.2",this.scriptName=scriptName,this.logLevels={DEBUG:5,INFO:4,NOTIFY:3,WARNING:2,ERROR:1,CRITICAL:0,NONE:-1},this.isLoon="undefined"!=typeof $loon,this.isQuanX="undefined"!=typeof $task,this.isJSBox="undefined"!=typeof $drive,this.isNode="undefined"!=typeof module&&!this.isJSBox,this.isSurge="undefined"!=typeof $httpClient&&!this.isLoon,this.node={request:void 0,fs:void 0,data:{}},this.iOSUserAgent="Mozilla/5.0 (iPhone; CPU iPhone OS 13_3_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.5 Mobile/15E148 Safari/604.1",this.pcUserAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.125 Safari/537.36 Edg/84.0.522.59",this.logLevel=logLevel,this._barkUrl="",this.isNode){this.node.fs=require("fs"),this.node.request=require("request");try{this.node.fs.accessSync("./magic.json",this.node.fs.constants.R_OK|this.node.fs.constants.W_OK)}catch(err){this.node.fs.writeFileSync("./magic.json","{}",{encoding:"utf8"})}this.node.data=require("./magic.json")}else this.isJSBox&&($file.exists("drive://MagicJS")||$file.mkdir("drive://MagicJS"),$file.exists("drive://MagicJS/magic.json")||$file.write({data:$data({string:"{}"}),path:"drive://MagicJS/magic.json"}))}set barkUrl(url){this._barkUrl=url.replace(/\/+$/g,"")}set logLevel(level){this._logLevel="string"==typeof level?level.toUpperCase():"DEBUG"}get logLevel(){return this._logLevel}get isRequest(){return"undefined"!=typeof $request&&"undefined"==typeof $response}get isResponse(){return"undefined"!=typeof $response}get request(){return"undefined"!=typeof $request?$request:void 0}get response(){return"undefined"!=typeof $response?($response.hasOwnProperty("status")&&($response.statusCode=$response.status),$response.hasOwnProperty("statusCode")&&($response.status=$response.statusCode),$response):void 0}get platform(){return this.isSurge?"Surge":this.isQuanX?"Quantumult X":this.isLoon?"Loon":this.isJSBox?"JSBox":this.isNode?"Node.js":"unknown"}read(key,session=""){let val="";this.isSurge||this.isLoon?val=$persistentStore.read(key):this.isQuanX?val=$prefs.valueForKey(key):this.isNode?val=this.node.data:this.isJSBox&&(val=$file.read("drive://MagicJS/magic.json").string);try{this.isNode&&(val=val[key]),this.isJSBox&&(val=JSON.parse(val)[key]),session&&("string"==typeof val&&(val=JSON.parse(val)),val=val&&"object"==typeof val?val[session]:null)}catch(err){this.logError(err),val=session?{}:null,this.del(key)}void 0===val&&(val=null);try{val&&"string"==typeof val&&(val=JSON.parse(val))}catch(err){}return this.logDebug(`READ DATA [${key}]${session?`[${session}]`:""}(${typeof val})\n${JSON.stringify(val)}`),val}write(key,val,session=""){let data=session?{}:"";if(session&&(this.isSurge||this.isLoon)?data=$persistentStore.read(key):session&&this.isQuanX?data=$prefs.valueForKey(key):this.isNode?data=this.node.data:this.isJSBox&&(data=JSON.parse($file.read("drive://MagicJS/magic.json").string)),session){try{"string"==typeof data&&(data=JSON.parse(data)),data="object"==typeof data&&data?data:{}}catch(err){this.logError(err),this.del(key),data={}}this.isJSBox||this.isNode?(data.hasOwnProperty(key)&&"object"==typeof data[key]||(data[key]={}),data[key].hasOwnProperty(session)||(data[key][session]=null),void 0===val?delete data[key][session]:data[key][session]=val):void 0===val?delete data[session]:data[session]=val}else this.isNode||this.isJSBox?void 0===val?delete data[key]:data[key]=val:data=void 0===val?null:val;"object"==typeof data&&(data=JSON.stringify(data)),this.isSurge||this.isLoon?$persistentStore.write(data,key):this.isQuanX?$prefs.setValueForKey(data,key):this.isNode?this.node.fs.writeFileSync("./magic.json",data):this.isJSBox&&$file.write({data:$data({string:data}),path:"drive://MagicJS/magic.json"}),this.logDebug(`WRITE DATA [${key}]${session?`[${session}]`:""}(${typeof val})\n${JSON.stringify(val)}`)}del(key,session=""){this.logDebug(`DELETE KEY [${key}]${session?`[${session}]`:""}`),this.write(key,null,session)}notify(title=this.scriptName,subTitle="",body="",opts=""){let convertOptions;if(opts=(_opts=>{let newOpts={};return"string"==typeof _opts?this.isLoon?newOpts={openUrl:_opts}:this.isQuanX&&(newOpts={"open-url":_opts}):"object"==typeof _opts&&(this.isLoon?(newOpts.openUrl=_opts["open-url"]?_opts["open-url"]:"",newOpts.mediaUrl=_opts["media-url"]?_opts["media-url"]:""):this.isQuanX&&(newOpts=_opts["open-url"]||_opts["media-url"]?_opts:{})),newOpts})(opts),1==arguments.length&&(title=this.scriptName,subTitle="",body=arguments[0]),this.logNotify(`title:${title}\nsubTitle:${subTitle}\nbody:${body}\noptions:${"object"==typeof opts?JSON.stringify(opts):opts}`),this.isSurge)$notification.post(title,subTitle,body);else if(this.isLoon)opts?$notification.post(title,subTitle,body,opts):$notification.post(title,subTitle,body);else if(this.isQuanX)$notify(title,subTitle,body,opts);else if(this.isNode){if(this._barkUrl){let content=encodeURI(`${title}/${subTitle}\n${body}`);this.get(`${this._barkUrl}/${content}`,()=>{})}}else if(this.isJSBox){let push={title:title,body:subTitle?`${subTitle}\n${body}`:body};$push.schedule(push)}}log(msg,level="INFO"){this.logLevels[this._logLevel]<this.logLevels[level.toUpperCase()]||console.log(`[${level}] [${this.scriptName}]\n${msg}\n`)}logDebug(msg){this.log(msg,"DEBUG")}logInfo(msg){this.log(msg,"INFO")}logNotify(msg){this.log(msg,"NOTIFY")}logWarning(msg){this.log(msg,"WARNING")}logError(msg){this.log(msg,"ERROR")}logRetry(msg){this.log(msg,"RETRY")}adapterHttpOptions(options,method){let _options="object"==typeof options?Object.assign({},options):{url:options,headers:{}};_options.hasOwnProperty("header")&&!_options.hasOwnProperty("headers")&&(_options.headers=_options.header,delete _options.header);const headersMap={accept:"Accept","accept-ch":"Accept-CH","accept-charset":"Accept-Charset","accept-features":"Accept-Features","accept-encoding":"Accept-Encoding","accept-language":"Accept-Language","accept-ranges":"Accept-Ranges","access-control-allow-credentials":"Access-Control-Allow-Credentials","access-control-allow-origin":"Access-Control-Allow-Origin","access-control-allow-methods":"Access-Control-Allow-Methods","access-control-allow-headers":"Access-Control-Allow-Headers","access-control-max-age":"Access-Control-Max-Age","access-control-expose-headers":"Access-Control-Expose-Headers","access-control-request-method":"Access-Control-Request-Method","access-control-request-headers":"Access-Control-Request-Headers",age:"Age",allow:"Allow",alternates:"Alternates",authorization:"Authorization","cache-control":"Cache-Control",connection:"Connection","content-encoding":"Content-Encoding","content-language":"Content-Language","content-length":"Content-Length","content-location":"Content-Location","content-md5":"Content-MD5","content-range":"Content-Range","content-security-policy":"Content-Security-Policy","content-type":"Content-Type",cookie:"Cookie",dnt:"DNT",date:"Date",etag:"ETag",expect:"Expect",expires:"Expires",from:"From",host:"Host","if-match":"If-Match","if-modified-since":"If-Modified-Since","if-none-match":"If-None-Match","if-range":"If-Range","if-unmodified-since":"If-Unmodified-Since","last-event-id":"Last-Event-ID","last-modified":"Last-Modified",link:"Link",location:"Location","max-forwards":"Max-Forwards",negotiate:"Negotiate",origin:"Origin",pragma:"Pragma","proxy-authenticate":"Proxy-Authenticate","proxy-authorization":"Proxy-Authorization",range:"Range",referer:"Referer","retry-after":"Retry-After","sec-websocket-extensions":"Sec-Websocket-Extensions","sec-websocket-key":"Sec-Websocket-Key","sec-websocket-origin":"Sec-Websocket-Origin","sec-websocket-protocol":"Sec-Websocket-Protocol","sec-websocket-version":"Sec-Websocket-Version",server:"Server","set-cookie":"Set-Cookie","set-cookie2":"Set-Cookie2","strict-transport-security":"Strict-Transport-Security",tcn:"TCN",te:"TE",trailer:"Trailer","transfer-encoding":"Transfer-Encoding",upgrade:"Upgrade","user-agent":"User-Agent","variant-vary":"Variant-Vary",vary:"Vary",via:"Via",warning:"Warning","www-authenticate":"WWW-Authenticate","x-content-duration":"X-Content-Duration","x-content-security-policy":"X-Content-Security-Policy","x-dnsprefetch-control":"X-DNSPrefetch-Control","x-frame-options":"X-Frame-Options","x-requested-with":"X-Requested-With","x-surge-skip-scripting":"X-Surge-Skip-Scripting"};if("object"==typeof _options.headers)for(let key in _options.headers)headersMap[key]&&(_options.headers[headersMap[key]]=_options.headers[key],delete _options.headers[key]);_options.headers&&"object"==typeof _options.headers&&_options.headers["User-Agent"]||(_options.headers&&"object"==typeof _options.headers||(_options.headers={}),this.isNode?_options.headers["User-Agent"]=this.pcUserAgent:_options.headers["User-Agent"]=this.iOSUserAgent);let skipScripting=!1;if(("object"==typeof _options.opts&&(!0===_options.opts.hints||!0===_options.opts["Skip-Scripting"])||"object"==typeof _options.headers&&!0===_options.headers["X-Surge-Skip-Scripting"])&&(skipScripting=!0),skipScripting||(this.isSurge?_options.headers["X-Surge-Skip-Scripting"]=!1:this.isLoon?_options.headers["X-Requested-With"]="XMLHttpRequest":this.isQuanX&&("object"!=typeof _options.opts&&(_options.opts={}),_options.opts.hints=!1)),this.isSurge&&!skipScripting||delete _options.headers["X-Surge-Skip-Scripting"],!this.isQuanX&&_options.hasOwnProperty("opts")&&delete _options.opts,this.isQuanX&&_options.hasOwnProperty("opts")&&delete _options.opts["Skip-Scripting"],"GET"===method&&!this.isNode&&_options.body){let qs=Object.keys(_options.body).map(key=>void 0===_options.body?"":`${encodeURIComponent(key)}=${encodeURIComponent(_options.body[key])}`).join("&");_options.url.indexOf("?")<0&&(_options.url+="?"),_options.url.lastIndexOf("&")+1!=_options.url.length&&_options.url.lastIndexOf("?")+1!=_options.url.length&&(_options.url+="&"),_options.url+=qs,delete _options.body}return this.isQuanX?(_options.hasOwnProperty("body")&&"string"!=typeof _options.body&&(_options.body=JSON.stringify(_options.body)),_options.method=method):this.isNode?(delete _options.headers["Accept-Encoding"],"object"==typeof _options.body&&("GET"===method?(_options.qs=_options.body,delete _options.body):"POST"===method&&(_options.json=!0,_options.body=_options.body))):this.isJSBox&&(_options.header=_options.headers,delete _options.headers),_options}get(options,callback){let _options=this.adapterHttpOptions(options,"GET");if(this.logDebug(`HTTP GET: ${JSON.stringify(_options)}`),this.isSurge||this.isLoon)$httpClient.get(_options,callback);else if(this.isQuanX)$task.fetch(_options).then(resp=>{resp.status=resp.statusCode,callback(null,resp,resp.body)},reason=>callback(reason.error,null,null));else{if(this.isNode)return this.node.request.get(_options,callback);this.isJSBox&&(_options.handler=resp=>{let err=resp.error?JSON.stringify(resp.error):void 0,data="object"==typeof resp.data?JSON.stringify(resp.data):resp.data;callback(err,resp.response,data)},$http.get(_options))}}post(options,callback){let _options=this.adapterHttpOptions(options,"POST");if(this.logDebug(`HTTP POST: ${JSON.stringify(_options)}`),this.isSurge||this.isLoon)$httpClient.post(_options,callback);else if(this.isQuanX)$task.fetch(_options).then(resp=>{resp.status=resp.statusCode,callback(null,resp,resp.body)},reason=>{callback(reason.error,null,null)});else{if(this.isNode)return this.node.request.post(_options,callback);this.isJSBox&&(_options.handler=resp=>{let err=resp.error?JSON.stringify(resp.error):void 0,data="object"==typeof resp.data?JSON.stringify(resp.data):resp.data;callback(err,resp.response,data)},$http.post(_options))}}done(value={}){"undefined"!=typeof $done&&$done(value)}isToday(day){if(null==day)return!1;{let today=new Date;return"string"==typeof day&&(day=new Date(day)),today.getFullYear()==day.getFullYear()&&today.getMonth()==day.getMonth()&&today.getDay()==day.getDay()}}isNumber(val){return"NaN"!==parseFloat(val).toString()}attempt(promise,defaultValue=null){return promise.then(args=>[null,args]).catch(ex=>(this.logError(ex),[ex,defaultValue]))}retry(fn,retries=5,interval=0,callback=null){return(...args)=>new Promise((resolve,reject)=>{function _retry(...args){Promise.resolve().then(()=>fn.apply(this,args)).then(result=>{"function"==typeof callback?Promise.resolve().then(()=>callback(result)).then(()=>{resolve(result)}).catch(ex=>{retries>=1?interval>0?setTimeout(()=>_retry.apply(this,args),interval):_retry.apply(this,args):reject(ex),retries--}):resolve(result)}).catch(ex=>{this.logRetry(ex),retries>=1&&interval>0?setTimeout(()=>_retry.apply(this,args),interval):retries>=1?_retry.apply(this,args):reject(ex),retries--})}_retry.apply(this,args)})}formatTime(time,fmt="yyyy-MM-dd hh:mm:ss"){var o={"M+":time.getMonth()+1,"d+":time.getDate(),"h+":time.getHours(),"m+":time.getMinutes(),"s+":time.getSeconds(),"q+":Math.floor((time.getMonth()+3)/3),S:time.getMilliseconds()};/(y+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(time.getFullYear()+"").substr(4-RegExp.$1.length)));for(let k in o)new RegExp("("+k+")").test(fmt)&&(fmt=fmt.replace(RegExp.$1,1==RegExp.$1.length?o[k]:("00"+o[k]).substr((""+o[k]).length)));return fmt}now(){return this.formatTime(new Date,"yyyy-MM-dd hh:mm:ss")}today(){return this.formatTime(new Date,"yyyy-MM-dd")}sleep(time){return new Promise(resolve=>setTimeout(resolve,time))}}(scriptName)}magicJS.unifiedPushUrl=magicJS.read("unicom_unified_push_url")||magicJS.read("magicjs_unified_push_url"),(async()=>{if(magicJS.isRequest){if(getLotteryCookieRegex.test(magicJS.request.url))try{let cookie=magicJS.request.headers.Cookie,hisCookie=magicJS.read(unicomCookieKey),mobile01=/c_mobile=(\d{11})/.exec(cookie),mobile02=/mobileServiceAll=(\d{11})/.exec(cookie),mobile03=/u_account=(\d{11})/.exec(cookie),mobile04=/desmobile==(\d{11})/.exec(magicJS.request.headers.Referer),mobile="";mobile=mobile01?mobile01[1]:mobile02?mobile02[1]:mobile03?mobile03[1]:mobile04[1];let hisMobile=magicJS.read(mobileKey),encryptMobile=/encryptmobile=([a-zA-Z0-9]*)/.exec(magicJS.request.url)[1],hisEncryptMobile=magicJS.read(encryptMobileKey),cityCode=/city=(\d*)/.exec(magicJS.request.headers.Cookie)[1],hisCityCode=magicJS.read("city_code"),notifyContent="";magicJS.logInfo(`æ–°çš„cookieï¼š${cookie}\n\næ—§çš„cookieï¼š${hisCookie}`),magicJS.logInfo(`æ–°çš„æ‰‹æœºå·ï¼š${mobile}\næ—§çš„æ‰‹æœºå·ï¼š${hisMobile}`),magicJS.logInfo(`æ–°çš„æ‰‹æœºå·å¯†æ–‡ï¼š${encryptMobile}\næ—§çš„æ‰‹æœºå·å¯†æ–‡ï¼š${hisEncryptMobile}`),magicJS.logInfo(`æ–°çš„åŸå¸‚ä»£ç ï¼š${cityCode}\næ—§çš„åŸå¸‚ä»£ç ï¼š${hisCityCode}`),cookie!=hisCookie?(magicJS.write(unicomCookieKey,cookie),hisCookie?(magicJS.logInfo("æ›´æ–°è”é€šcookieæˆåŠŸï¼š"+cookie),notifyContent+="ğŸ©è”é€šcookie:æ›´æ–°æˆåŠŸ"):(magicJS.logInfo("é¦–æ¬¡è·å–è”é€šcookieæˆåŠŸï¼š"+cookie),notifyContent+="ğŸ©è”é€šcookie:è·å–æˆåŠŸ")):(magicJS.logInfo("è”é€šcookieæ²¡æœ‰å˜åŒ–ï¼Œæ— éœ€æ›´æ–°"),notifyContent+="ğŸ©è”é€šcookie:æ²¡æœ‰å˜åŒ–"),mobile!=hisMobile?(magicJS.write(mobileKey,mobile),notifyContent+=hisMobile?" ğŸ“±æ‰‹æœºå·:æ›´æ–°æˆåŠŸ":" ğŸ“±æ‰‹æœºå·:è·å–æˆåŠŸ"):(magicJS.logInfo("æ‰‹æœºå·ç æ²¡æœ‰å˜åŒ–ï¼Œæ— éœ€æ›´æ–°"),notifyContent+=" ğŸ“±æ‰‹æœºå·:æ²¡æœ‰å˜åŒ–"),hisEncryptMobile!=encryptMobile?(magicJS.write(encryptMobileKey,encryptMobile),notifyContent+=hisEncryptMobile?"\nğŸ—³æ‰‹æœºå·å¯†æ–‡:æ›´æ–°æˆåŠŸ":"\nğŸ—³æ‰‹æœºå·å¯†æ–‡:è·å–æˆåŠŸ"):(magicJS.logInfo("æ‰‹æœºå·ç å¯†æ–‡æ²¡æœ‰å˜åŒ–ï¼Œæ— éœ€æ›´æ–°"),notifyContent+="\nğŸ—³æ‰‹æœºå·å¯†æ–‡:æ²¡æœ‰å˜åŒ–"),cityCode!=hisCityCode?(magicJS.write("city_code",cityCode),hisCityCode?(magicJS.logInfo("æ›´æ–°è”é€šåŸå¸‚ä»£ç æˆåŠŸï¼š"+cityCode),notifyContent+=" ğŸŒƒåŸå¸‚:æ›´æ–°æˆåŠŸ"):(magicJS.logInfo("é¦–æ¬¡è·å–è”é€šåŸå¸‚ä»£ç æˆåŠŸï¼š"+cityCode),notifyContent+=" ğŸŒƒåŸå¸‚:è·å–æˆåŠŸ")):(magicJS.logInfo("åŸå¸‚ä»£ç æ²¡æœ‰å˜åŒ–ï¼Œæ— éœ€æ›´æ–°"),notifyContent+=" ğŸŒƒåŸå¸‚:æ²¡æœ‰å˜åŒ–"),magicJS.notify("ä¸­å›½è”é€š","",notifyContent)}catch(err){magicJS.logError(`è·å–è”é€šæ‰‹æœºè¥ä¸šå…Cookieå‡ºç°å¼‚å¸¸ï¼Œå¼‚å¸¸ä¿¡æ¯ï¼š${err}`)}}else{magicJS.logInfo("ç­¾åˆ°ä¸æŠ½å¥–å¼€å§‹æ‰§è¡Œï¼");let cookie=magicJS.read(unicomCookieKey),mobile=magicJS.read(mobileKey),encryptMobile=magicJS.read(encryptMobileKey),cityCode=magicJS.read("city_code");if(cookie)if(cookie.hasOwnProperty("default")||cookie.indexOf("default")>=0)magicJS.notify("âŒæ–°ç‰ˆç­¾åˆ°éœ€è¦é‡æ–°è·å–Cookie\nè¯·åœ¨Appä¸­æœç´¢â€œå¤©å¤©æŠ½å¥–â€è·å–"),magicJS.read(unicomCookieKey,""),magicJS.read(mobileKey,""),magicJS.read(encryptMobileKey,""),magicJS.read("city_code","");else{let notifyTitle="ä¸­å›½è”é€š",notifySubTtile="",notifyContent="",[errUserLogin,[loginResult,loginStr]=[!1,"ç”¨æˆ·ç™»å½•å¤±è´¥"]]=await magicJS.attempt(magicJS.retry(UserLogin,5,1e3)(cookie,encryptMobile));if(errUserLogin||!1===loginResult)notifySubTtile="âŒç”¨æˆ·ç™»å½•å‡ºç°å¼‚å¸¸ï¼Œè¯·æŸ¥é˜…æ—¥å¿—ï¼";else{let AppSigninPromise=magicJS.retry(AppSignin,10,100)(cookie),[,[signinResult,siginiResultStr,prizeCount,growthV,flowerCount]=[!1,"ç­¾åˆ°å¼‚å¸¸",null,null,null]]=await magicJS.attempt(AppSigninPromise);if(!0===signinResult){let doublePrizeCount=null;notifySubTtile=siginiResultStr,doublePrizeCount&&(prizeCount+=doublePrizeCount),prizeCount&&(notifyContent+=`ç§¯åˆ†+${prizeCount} `),growthV&&(notifyContent+=`æˆé•¿å€¼+${growthV} `),flowerCount&&(notifyContent+=`é²œèŠ±+${flowerCount} `)}let genContinueCountPromise=magicJS.retry(GetContinueCount,10,100)(cookie),[,contineCount]=await magicJS.attempt(genContinueCountPromise);contineCount&&(notifySubTtile+=` è¿ç»­ç­¾åˆ°${contineCount}å¤©`);let getUserInfoPromise=magicJS.retry(GetUserInfo,10,100)(cookie,mobile),[,userInfo]=await magicJS.attempt(getUserInfoPromise);if(userInfo&&userInfo.hasOwnProperty("flow")&&userInfo.hasOwnProperty("fee")){let userInfoStr=`${userInfo.flow} ${userInfo.fee}\n${userInfo.voice} ${userInfo.point}`;notifyContent+=notifyContent?`\n${userInfoStr}`:userInfoStr}let getMeituanCouponPromise=magicJS.retry(GetMeituanCoupon,3,100)(cookie),[,meituanResult=null]=await magicJS.attempt(getMeituanCouponPromise);meituanResult&&(notifyContent+=notifyContent?`\n${meituanResult}`:meituanResult);let[errLottery,[lotteryCount,lotteryResult]=[]]=await magicJS.attempt(StartDailyLottery(cookie,encryptMobile));errLottery&&magicJS.logError("æ—§ç‰ˆæŠ½å¥–å‡ºç°å¼‚å¸¸ï¼š"+errLottery);let[errLotteryNewVersion,[lotteryNewVersionCount,lotteryNewVersionResult]=[]]=await magicJS.attempt(StartDailyLotteryNewVersion(cookie,encryptMobile,cityCode,lotteryCount));errLotteryNewVersion&&magicJS.logError("æ–°ç‰ˆæŠ½å¥–å‡ºç°å¼‚å¸¸ï¼š"+errLotteryNewVersion),lotteryResult&&(notifyContent+=notifyContent?`\n${lotteryResult}`:lotteryResult),lotteryNewVersionResult&&(notifyContent+=notifyContent?`\n${lotteryNewVersionResult}`:lotteryNewVersionResult)}magicJS.logInfo("ç­¾åˆ°ä¸æŠ½å¥–æ‰§è¡Œå®Œæ¯•ï¼"),magicJS.notify(notifyTitle,notifySubTtile,notifyContent),magicJS.done()}else magicJS.logError("æ²¡æœ‰è·å–åˆ°è”é€šæ‰‹æœºè¥ä¸šå…Cookieï¼Œè¯·åœ¨Appä¸­æœç´¢å¤©å¤©æŠ½å¥–è·å–ã€‚"),magicJS.notify("âŒæ²¡æœ‰è·å–åˆ°Cookie\nè¯·åœ¨æ‰‹æœºè¥ä¸šå…ä¸­æœç´¢â€œå¤©å¤©æŠ½å¥–â€è·å–")}magicJS.done()})();